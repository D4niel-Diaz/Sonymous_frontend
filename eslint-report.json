[{"filePath":"C:\\sorsu-project\\frontend\\app\\admin\\dashboard\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\sorsu-project\\frontend\\app\\admin\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\sorsu-project\\frontend\\app\\create\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Message' is defined but never used.","line":6,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":22,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"Message"},"fix":{"range":[191,239],"text":""},"desc":"Remove unused import declaration."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useRef, useEffect, useCallback } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { createMessage } from '@/lib/messages';\r\nimport type { Message } from '@/lib/messages';\r\nimport { useRouter } from 'next/navigation';\r\n\r\nexport default function CreateMessagePage() {\r\n    const [content, setContent] = useState('');\r\n    const [category, setCategory] = useState('');\r\n    const [error, setError] = useState('');\r\n    const [success, setSuccess] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n    const textareaRef = useRef<HTMLTextAreaElement>(null);\r\n    const router = useRouter();\r\n\r\n    const MAX = 200;\r\n    const charCount = content.length;\r\n    const counterClass = charCount > MAX ? 'over' : charCount > 160 ? 'warn' : '';\r\n\r\n    // Auto-resize textarea\r\n    const autoResize = useCallback(() => {\r\n        const el = textareaRef.current;\r\n        if (el) {\r\n            el.style.height = 'auto';\r\n            el.style.height = el.scrollHeight + 'px';\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        autoResize();\r\n    }, [content, autoResize]);\r\n\r\n    async function handleSubmit(e: React.FormEvent) {\r\n        e.preventDefault();\r\n        setError('');\r\n        setSuccess('');\r\n\r\n        if (!content.trim()) {\r\n            setError('Message content is required.');\r\n            return;\r\n        }\r\n\r\n        if (charCount > MAX) {\r\n            setError(`Message must be ${MAX} characters or less.`);\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n        try {\r\n            await createMessage({\r\n                content: content.trim(),\r\n                category: category || undefined,\r\n            });\r\n            setContent('');\r\n            setCategory('');\r\n            setSuccess('Message posted anonymously! Γ£¿ Redirecting...');\r\n            setTimeout(() => router.push('/messages'), 1500);\r\n        } catch (err: unknown) {\r\n            if (typeof err === 'object' && err !== null && 'response' in err) {\r\n                const axiosErr = err as { response?: { status?: number; data?: { message?: string; errors?: Record<string, string[]> } } };\r\n                if (axiosErr.response?.status === 429) {\r\n                    setError('Too many messages! Please wait a minute before posting again.');\r\n                } else if (axiosErr.response?.data?.errors) {\r\n                    const firstError = Object.values(axiosErr.response.data.errors)[0];\r\n                    setError(Array.isArray(firstError) ? firstError[0] : 'Validation error.');\r\n                } else {\r\n                    setError(axiosErr.response?.data?.message || 'Failed to post message.');\r\n                }\r\n            } else {\r\n                setError('Network error. Please try again.');\r\n            }\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"create-page\">\r\n            <motion.form\r\n                className=\"create-card\"\r\n                onSubmit={handleSubmit}\r\n                initial={{ opacity: 0, y: 20 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                transition={{ duration: 0.5, ease: 'easeOut' }}\r\n            >\r\n                <h1 className=\"create-title\">Γ£ì∩╕Å Write a Message</h1>\r\n                <p className=\"create-subtitle\">Share anonymously ΓÇö no one will know it&apos;s you.</p>\r\n\r\n                <textarea\r\n                    ref={textareaRef}\r\n                    className=\"create-textarea\"\r\n                    value={content}\r\n                    onChange={(e) => setContent(e.target.value)}\r\n                    placeholder=\"What's on your mind? Write a message, a rant, or a story...\"\r\n                    maxLength={MAX}\r\n                    rows={4}\r\n                />\r\n\r\n                <motion.div\r\n                    className={`create-char ${counterClass}`}\r\n                    animate={{ scale: charCount > 180 ? [1, 1.1, 1] : 1 }}\r\n                    transition={{ duration: 0.2 }}\r\n                >\r\n                    {charCount}/{MAX}\r\n                </motion.div>\r\n\r\n                <div className=\"create-row\">\r\n                    <select\r\n                        className=\"create-select\"\r\n                        value={category}\r\n                        onChange={(e) => setCategory(e.target.value)}\r\n                    >\r\n                        <option value=\"\">No category</option>\r\n                        <option value=\"advice\">≡ƒÆí Advice</option>\r\n                        <option value=\"confession\">≡ƒñ½ Confession / Rant</option>\r\n                        <option value=\"fun\">≡ƒÄë Fun</option>\r\n                    </select>\r\n\r\n                    <motion.button\r\n                        className=\"create-submit\"\r\n                        type=\"submit\"\r\n                        disabled={loading || charCount === 0}\r\n                        whileHover={{ scale: 1.04, y: -2 }}\r\n                        whileTap={{ scale: 0.96 }}\r\n                    >\r\n                        {loading ? 'Posting...' : 'Post Anonymously'}\r\n                    </motion.button>\r\n                </div>\r\n\r\n                <AnimatePresence>\r\n                    {error && (\r\n                        <motion.div\r\n                            className=\"create-error\"\r\n                            initial={{ opacity: 0, height: 0 }}\r\n                            animate={{ opacity: 1, height: 'auto' }}\r\n                            exit={{ opacity: 0, height: 0 }}\r\n                        >\r\n                            {error}\r\n                        </motion.div>\r\n                    )}\r\n                    {success && (\r\n                        <motion.div\r\n                            className=\"create-success\"\r\n                            initial={{ opacity: 0, height: 0 }}\r\n                            animate={{ opacity: 1, height: 'auto' }}\r\n                            exit={{ opacity: 0, height: 0 }}\r\n                        >\r\n                            {success}\r\n                        </motion.div>\r\n                    )}\r\n                </AnimatePresence>\r\n            </motion.form>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\sorsu-project\\frontend\\app\\layout.tsx","messages":[{"ruleId":"@next/next/no-page-custom-font","severity":1,"message":"Custom fonts not added in `pages/_document.js` will only load for a single page. This is discouraged. See: https://nextjs.org/docs/messages/no-page-custom-font","line":21,"column":9,"nodeType":"JSXOpeningElement","endLine":24,"endColumn":11}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import type { Metadata } from \"next\";\nimport \"./globals.css\";\nimport { AdminProvider } from \"@/context/AdminContext\";\nimport Navbar from \"@/components/Navbar\";\n\nexport const metadata: Metadata = {\n  title: \"SoNymous ΓÇô Anonymous Student Message Wall\",\n  description: \"A safe, anonymous space to share your thoughts. No signup, no judgment.\",\n};\n\nexport default function RootLayout({\n  children,\n}: Readonly<{\n  children: React.ReactNode;\n}>) {\n  return (\n    <html lang=\"en\">\n      <head>\n        <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\" />\n        <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossOrigin=\"anonymous\" />\n        <link\n          href=\"https://fonts.googleapis.com/css2?family=Caveat:wght@400;500;600;700&family=Inter:wght@400;500;600;700;800&display=swap\"\n          rel=\"stylesheet\"\n        />\n      </head>\n      <body>\n        <AdminProvider>\n          <Navbar />\n          {children}\n        </AdminProvider>\n      </body>\n    </html>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\sorsu-project\\frontend\\app\\messages\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\sorsu-project\\frontend\\app\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\sorsu-project\\frontend\\components\\CategoryFilter.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\sorsu-project\\frontend\\components\\MessageCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\sorsu-project\\frontend\\components\\MessageForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\sorsu-project\\frontend\\components\\Navbar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\sorsu-project\\frontend\\components\\TextType.jsx","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'getRandomSpeed'. Either include it or remove the dependency array.","line":133,"column":6,"nodeType":"ArrayExpression","endLine":148,"endColumn":4,"suggestions":[{"desc":"Update the dependencies array to be: [currentCharIndex, displayedText, isDeleting, typingSpeed, deletingSpeed, pauseDuration, textArray, currentTextIndex, loop, initialDelay, isVisible, reverseMode, variableSpeed, onSentenceComplete, getRandomSpeed]","fix":{"range":[3951,4207],"text":"[currentCharIndex, displayedText, isDeleting, typingSpeed, deletingSpeed, pauseDuration, textArray, currentTextIndex, loop, initialDelay, isVisible, reverseMode, variableSpeed, onSentenceComplete, getRandomSpeed]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\sorsu-project\\frontend\\components\\TextType.tsx","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'getRandomSpeed'. Either include it or remove the dependency array.","line":155,"column":8,"nodeType":"ArrayExpression","endLine":170,"endColumn":6,"suggestions":[{"desc":"Update the dependencies array to be: [currentCharIndex, displayedText, isDeleting, typingSpeed, deletingSpeed, pauseDuration, textArray, currentTextIndex, loop, initialDelay, isVisible, reverseMode, variableSpeed, onSentenceComplete, getRandomSpeed]","fix":{"range":[5378,5708],"text":"[currentCharIndex, displayedText, isDeleting, typingSpeed, deletingSpeed, pauseDuration, textArray, currentTextIndex, loop, initialDelay, isVisible, reverseMode, variableSpeed, onSentenceComplete, getRandomSpeed]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\sorsu-project\\frontend\\context\\AdminContext.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\sorsu-project\\frontend\\context\\AdminContext.tsx:32:13\n  30 |         const savedAdmin = localStorage.getItem('admin_profile');\n  31 |         if (savedToken && savedAdmin) {\n> 32 |             setToken(savedToken);\n     |             ^^^^^^^^ Avoid calling setState() directly within an effect\n  33 |             try {\n  34 |                 setAdmin(JSON.parse(savedAdmin));\n  35 |             } catch {","line":32,"column":13,"nodeType":null,"endLine":32,"endColumn":21}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport React, { createContext, useContext, useState, useEffect, useCallback } from 'react';\r\nimport type { AdminProfile } from '@/lib/admin';\r\n\r\ninterface AdminContextType {\r\n    token: string | null;\r\n    admin: AdminProfile | null;\r\n    isAuthenticated: boolean;\r\n    login: (token: string, admin: AdminProfile) => void;\r\n    logout: () => void;\r\n}\r\n\r\nconst AdminContext = createContext<AdminContextType>({\r\n    token: null,\r\n    admin: null,\r\n    isAuthenticated: false,\r\n    login: () => { },\r\n    logout: () => { },\r\n});\r\n\r\nexport function AdminProvider({ children }: { children: React.ReactNode }) {\r\n    const [token, setToken] = useState<string | null>(null);\r\n    const [admin, setAdmin] = useState<AdminProfile | null>(null);\r\n    const [hydrated, setHydrated] = useState(false);\r\n\r\n    // Hydrate from localStorage on mount\r\n    useEffect(() => {\r\n        const savedToken = localStorage.getItem('admin_token');\r\n        const savedAdmin = localStorage.getItem('admin_profile');\r\n        if (savedToken && savedAdmin) {\r\n            setToken(savedToken);\r\n            try {\r\n                setAdmin(JSON.parse(savedAdmin));\r\n            } catch {\r\n                localStorage.removeItem('admin_profile');\r\n            }\r\n        }\r\n        setHydrated(true);\r\n    }, []);\r\n\r\n    const login = useCallback((newToken: string, newAdmin: AdminProfile) => {\r\n        setToken(newToken);\r\n        setAdmin(newAdmin);\r\n        localStorage.setItem('admin_token', newToken);\r\n        localStorage.setItem('admin_profile', JSON.stringify(newAdmin));\r\n    }, []);\r\n\r\n    const logout = useCallback(() => {\r\n        setToken(null);\r\n        setAdmin(null);\r\n        localStorage.removeItem('admin_token');\r\n        localStorage.removeItem('admin_profile');\r\n    }, []);\r\n\r\n    // Don't render children until localStorage is checked\r\n    if (!hydrated) return null;\r\n\r\n    return (\r\n        <AdminContext.Provider\r\n            value={{ token, admin, isAuthenticated: !!token, login, logout }}\r\n        >\r\n            {children}\r\n        </AdminContext.Provider>\r\n    );\r\n}\r\n\r\nexport function useAdmin() {\r\n    return useContext(AdminContext);\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\sorsu-project\\frontend\\eslint.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\sorsu-project\\frontend\\lib\\admin.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\sorsu-project\\frontend\\lib\\api.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\sorsu-project\\frontend\\lib\\messages.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\sorsu-project\\frontend\\lib\\utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\sorsu-project\\frontend\\next.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\sorsu-project\\frontend\\postcss.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
